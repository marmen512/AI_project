# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É "2"

## üéØ –ü–û–¢–û–ß–ù–ò–ô –°–¢–ê–ù

–ü—Ä–æ–µ–∫—Ç "2" –º–∞—î **–º–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É** –∑ –æ–¥–Ω–∏–º entry point —á–µ—Ä–µ–∑ `runtime.bootstrap`.

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê

### –ì–æ–ª–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

```
project/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml              # ‚úÖ –ì–û–õ–û–í–ù–ò–ô config (—á–∏—Ç–∞—î—Ç—å—Å—è runtime.bootstrap)
‚îÇ   ‚îú‚îÄ‚îÄ trm_config.py            # ‚úÖ Fallback –¥–ª—è –¥–µ—Ñ–æ–ª—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ training_config.py       # ‚ö†Ô∏è DEPRECATED (AutoTrainingConfig)
‚îÇ   ‚îú‚îÄ‚îÄ training_resume.py       # ‚ö†Ô∏è DEPRECATED (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ runtime.resume)
‚îÇ   ‚îî‚îÄ‚îÄ training_defaults.sh     # ‚ö†Ô∏è DEPRECATED –¥–ª—è runtime.bootstrap
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ train_model.py           # ‚úÖ –Ñ–î–ò–ù–ò–ô entry point (wrapper –¥–æ runtime.bootstrap)
‚îÇ
‚îú‚îÄ‚îÄ runtime/
‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.py             # ‚úÖ –ì–æ–ª–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –Ω–∞–≤—á–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ modes.py                 # ‚úÖ –†–µ–∂–∏–º–∏ (new/resume/service)
‚îÇ   ‚îú‚îÄ‚îÄ resume.py                # ‚úÖ Resume –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ checkpointing.py         # ‚úÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è checkpoint'–∞–º–∏
‚îÇ
‚îú‚îÄ‚îÄ factories/
‚îÇ   ‚îú‚îÄ‚îÄ model_factory.py         # ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ optimizer_factory.py     # ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ dataset_factory.py       # ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞—Ç–∞—Å–µ—Ç—ñ–≤
‚îÇ
‚îú‚îÄ‚îÄ train/
‚îÇ   ‚îú‚îÄ‚îÄ trainer_factory.py       # ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è trainer'—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ curriculum/              # ‚úÖ Curriculum learning
‚îÇ   ‚îú‚îÄ‚îÄ metrics/                 # ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ train.py                 # ‚ö†Ô∏è DEPRECATED (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ runtime.bootstrap)
‚îÇ
‚îî‚îÄ‚îÄ rag/
    ‚îî‚îÄ‚îÄ rag_dataset_wrapper.py   # ‚úÖ RAG —á–µ—Ä–µ–∑ dataset wrapper
```

---

## üöÄ FLOW –ù–ê–í–ß–ê–ù–ù–Ø

```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø—É—Å–∫–∞—î:
   python scripts/train_model.py --config config/config.yaml

2. scripts/train_model.py:
   ‚Üí –≤–∏–∫–ª–∏–∫–∞—î runtime.bootstrap.bootstrap()

3. runtime.bootstrap.bootstrap():
   ‚Üí –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î config/config.yaml (–∞–±–æ fallback –Ω–∞ TRMConfig)
   ‚Üí —Å—Ç–≤–æ—Ä—é—î –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —á–µ—Ä–µ–∑ factories/
   ‚Üí –Ω–∞–ª–∞—à—Ç–æ–≤—É—î trainer —á–µ—Ä–µ–∑ trainer_factory
   ‚Üí –∑–∞–ø—É—Å–∫–∞—î –Ω–∞–≤—á–∞–Ω–Ω—è
```

---

## ‚úÖ –ü–ï–†–ï–í–ê–ì–ò –ü–û–¢–û–ß–ù–û–á –ê–†–•–Ü–¢–ï–ö–¢–£–†–ò

1. **–û–¥–∏–Ω entry point** - –ª–µ–≥—à–µ –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏
2. **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å** - –∫–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—î —á—ñ—Ç–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
3. **Config.yaml** - –≤—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
4. **Factories** - –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –º–æ–¥–µ–ª—ñ/–æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä–∏/–¥–∞—Ç–∞—Å–µ—Ç–∏
5. **Runtime –º–æ–¥—É–ª—ñ** - —á–∏—Å—Ç–∞ –ª–æ–≥—ñ–∫–∞ —Ä–µ–∂–∏–º—ñ–≤ (new/resume/service)

---

## ‚ö†Ô∏è DEPRECATED –§–ê–ô–õ–ò

–î–µ—è–∫—ñ —Ñ–∞–π–ª–∏ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ —è–∫ DEPRECATED, –∞–ª–µ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–ª—è backwards compatibility:

- `train/train.py` - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ entry point
- `train/train_code_model.py` - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
- `train/train_trm_with_phi3.py` - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
- `config/training_resume.py` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `runtime.resume`
- `config/training_defaults.sh` - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è runtime.bootstrap

–î–∏–≤. `deprecated/README.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á

### ‚úÖ –î–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è:
```bash
python scripts/train_model.py --config config/config.yaml
```

### ‚úÖ –î–ª—è config:
–í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ `config/config.yaml`

### ‚úÖ –î–ª—è resume:
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `runtime.resume.find_latest_checkpoint()`

### ‚ö†Ô∏è –°—Ç–∞—Ä–∏–π –∫–æ–¥:
–ü—Ä–æ–¥–æ–≤–∂—É—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, –∞–ª–µ –æ—Ç—Ä–∏–º—É—î DEPRECATED warnings.

---

## üéØ –í–ò–°–ù–û–í–û–ö

**–ü—Ä–æ–µ–∫—Ç "2" –º–∞—î —á–∏—Å—Ç—É, –º–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —ñ –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!**

–ü–æ–≤–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ù–ï –ø–æ—Ç—Ä—ñ–±–µ–Ω - –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≤–∂–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –±—ñ–ª—å—à–æ—Å—Ç—ñ –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ –∑ –ø–ª–∞–Ω—É —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É.

